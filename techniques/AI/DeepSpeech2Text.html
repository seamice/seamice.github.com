<!DOCTYPE html>
<html lang="en-US" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-beta.64" />
    <meta name="theme" content="VuePress Theme Hope" />
    <meta property="og:url" content="https://seamice.github.io/blog/techniques/AI/DeepSpeech2Text.html"><meta property="og:site_name" content="Haiyue's Blog"><meta property="og:title" content="Audio to Text (DeepSpeech)"><meta property="og:description" content="What is DeepSpeech DeepSpeech is an open source Python library that enables us to build automatic speech ecognition systems. It is based on Baiduâ€™s 2014 paper titled Deep Speech: Scaling up end-to-end speech recognition."><meta property="og:type" content="article"><meta property="og:locale" content="en-US"><meta property="og:updated_time" content="2024-01-05T12:58:37.000Z"><meta property="article:author" content="Haiyue"><meta property="article:tag" content="audio2text"><meta property="article:published_time" content="2023-11-27T00:00:00.000Z"><meta property="article:modified_time" content="2024-01-05T12:58:37.000Z"><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"Audio to Text (DeepSpeech)","image":[""],"datePublished":"2023-11-27T00:00:00.000Z","dateModified":"2024-01-05T12:58:37.000Z","author":[{"@type":"Person","name":"Haiyue"}]}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-DEMNZ1E6YS"></script><script src="/src/js/gtag.js"></script><title>Audio to Text (DeepSpeech) | Haiyue's Blog</title><meta name="description" content="What is DeepSpeech DeepSpeech is an open source Python library that enables us to build automatic speech ecognition systems. It is based on Baiduâ€™s 2014 paper titled Deep Speech: Scaling up end-to-end speech recognition.">
    <style>
      :root {
        --bg-color: #fff;
      }

      html[data-theme="dark"] {
        --bg-color: #1d1e1f;
      }

      html,
      body {
        background: var(--bg-color);
      }
    </style>
    <script>
      const userMode = localStorage.getItem("vuepress-theme-hope-scheme");
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia("(prefers-color-scheme: dark)").matches;

      if (userMode === "dark" || (userMode !== "light" && systemDarkMode)) {
        document.documentElement.setAttribute("data-theme", "dark");
      }
    </script>
    <link rel="preload" href="/assets/style-7fbdadac.css" as="style"><link rel="stylesheet" href="/assets/style-7fbdadac.css">
    <link rel="modulepreload" href="/assets/app-ee1f1ffa.js"><link rel="modulepreload" href="/assets/DeepSpeech2Text.html-1e3bf077.js"><link rel="modulepreload" href="/assets/plugin-vue_export-helper-c27b6911.js"><link rel="modulepreload" href="/assets/DeepSpeech2Text.html-c093fb3a.js"><link rel="prefetch" href="/assets/index.html-5e33b1c8.js" as="script"><link rel="prefetch" href="/assets/intro.html-34bab613.js" as="script"><link rel="prefetch" href="/assets/index.html-e4ad597b.js" as="script"><link rel="prefetch" href="/assets/OpenVoiceVoiceCloing.html-b0d6c7b8.js" as="script"><link rel="prefetch" href="/assets/index.html-0a74fab9.js" as="script"><link rel="prefetch" href="/assets/ai_models.html-7f75d71e.js" as="script"><link rel="prefetch" href="/assets/cuda.html-1376a260.js" as="script"><link rel="prefetch" href="/assets/fine-tune.html-e3be769b.js" as="script"><link rel="prefetch" href="/assets/pytorch_finetune.html-a21001e4.js" as="script"><link rel="prefetch" href="/assets/Amplify.html-58887053.js" as="script"><link rel="prefetch" href="/assets/index.html-10cc5cad.js" as="script"><link rel="prefetch" href="/assets/index.html-ab817898.js" as="script"><link rel="prefetch" href="/assets/Techniques.html-c03f8575.js" as="script"><link rel="prefetch" href="/assets/index.html-01d0d312.js" as="script"><link rel="prefetch" href="/assets/index.html-81f81485.js" as="script"><link rel="prefetch" href="/assets/make.html-1d1c79c9.js" as="script"><link rel="prefetch" href="/assets/test.html-795764c8.js" as="script"><link rel="prefetch" href="/assets/01.basic_usuage.html-31c2928d.js" as="script"><link rel="prefetch" href="/assets/index.html-35c96215.js" as="script"><link rel="prefetch" href="/assets/index.html-48372036.js" as="script"><link rel="prefetch" href="/assets/q_a.html-62413f1a.js" as="script"><link rel="prefetch" href="/assets/index.html-89783138.js" as="script"><link rel="prefetch" href="/assets/enlarge.html-f66b5d9c.js" as="script"><link rel="prefetch" href="/assets/gcptowarp.html-aff5c29b.js" as="script"><link rel="prefetch" href="/assets/pythonwithgdal.html-ab1e40f3.js" as="script"><link rel="prefetch" href="/assets/resources.html-624c6df7.js" as="script"><link rel="prefetch" href="/assets/vivid_retrive_and_analysis.html-7dc73f98.js" as="script"><link rel="prefetch" href="/assets/index.html-da021dee.js" as="script"><link rel="prefetch" href="/assets/basic_usage.html-9031100a.js" as="script"><link rel="prefetch" href="/assets/gitee.html-ab9b2124.js" as="script"><link rel="prefetch" href="/assets/post_site_using_git.html-8d47e8a3.js" as="script"><link rel="prefetch" href="/assets/problems.html-ed1e531d.js" as="script"><link rel="prefetch" href="/assets/index.html-40547416.js" as="script"><link rel="prefetch" href="/assets/proxy.html-7e2f0f90.js" as="script"><link rel="prefetch" href="/assets/index.html-9f9b7cf1.js" as="script"><link rel="prefetch" href="/assets/index.html-f9f39e9a.js" as="script"><link rel="prefetch" href="/assets/basic.html-87f0632b.js" as="script"><link rel="prefetch" href="/assets/index.html-efb06e1b.js" as="script"><link rel="prefetch" href="/assets/UltraVNC.html-fb1ec982.js" as="script"><link rel="prefetch" href="/assets/academic.html-c4cd6645.js" as="script"><link rel="prefetch" href="/assets/kms.html-3915d468.js" as="script"><link rel="prefetch" href="/assets/notion.html-fd9e9a6b.js" as="script"><link rel="prefetch" href="/assets/index.html-91fd0c6e.js" as="script"><link rel="prefetch" href="/assets/q_a.html-d1510378.js" as="script"><link rel="prefetch" href="/assets/index.html-395a7d3e.js" as="script"><link rel="prefetch" href="/assets/ssh.html-9a52edfc.js" as="script"><link rel="prefetch" href="/assets/index.html-92f84c4f.js" as="script"><link rel="prefetch" href="/assets/peft_docs.html-c2e70abe.js" as="script"><link rel="prefetch" href="/assets/index.html-f9bcdc52.js" as="script"><link rel="prefetch" href="/assets/01.R Language.html-cd3670eb.js" as="script"><link rel="prefetch" href="/assets/02.Statistical tests.html-1055befc.js" as="script"><link rel="prefetch" href="/assets/03.Data manipulation.html-1b3357e7.js" as="script"><link rel="prefetch" href="/assets/index.html-3cb27121.js" as="script"><link rel="prefetch" href="/assets/01.Basic.html-c7cd22e4.js" as="script"><link rel="prefetch" href="/assets/index.html-77864c6e.js" as="script"><link rel="prefetch" href="/assets/index.html-1848a85e.js" as="script"><link rel="prefetch" href="/assets/html.html-70183c7c.js" as="script"><link rel="prefetch" href="/assets/libraries.html-85bef2df.js" as="script"><link rel="prefetch" href="/assets/Numpy.html-d30a4fe6.js" as="script"><link rel="prefetch" href="/assets/Pandas.html-f84385db.js" as="script"><link rel="prefetch" href="/assets/index.html-9dcd6ca2.js" as="script"><link rel="prefetch" href="/assets/SeniorFunction.html-f5741c6f.js" as="script"><link rel="prefetch" href="/assets/SingleClass.html-ff98de22.js" as="script"><link rel="prefetch" href="/assets/VirtualEnvironment.html-d543de02.js" as="script"><link rel="prefetch" href="/assets/csv.html-8b37df33.js" as="script"><link rel="prefetch" href="/assets/env.html-6732d20d.js" as="script"><link rel="prefetch" href="/assets/http.html-10ed3a0a.js" as="script"><link rel="prefetch" href="/assets/jupyter.html-1ae321d4.js" as="script"><link rel="prefetch" href="/assets/logging.html-a5901731.js" as="script"><link rel="prefetch" href="/assets/pip.html-35c2e884.js" as="script"><link rel="prefetch" href="/assets/psql_conn_pool.html-9c628bd1.js" as="script"><link rel="prefetch" href="/assets/thread.html-00769d28.js" as="script"><link rel="prefetch" href="/assets/01.index.html-9fb26170.js" as="script"><link rel="prefetch" href="/assets/02.Common_conf.html-37b6d86f.js" as="script"><link rel="prefetch" href="/assets/03.Examples.html-8f4f9433.js" as="script"><link rel="prefetch" href="/assets/04.Interceptor.html-c8a22a7c.js" as="script"><link rel="prefetch" href="/assets/index.html-46a37a06.js" as="script"><link rel="prefetch" href="/assets/01.index.html-63d0043f.js" as="script"><link rel="prefetch" href="/assets/02.selector.html-522016d1.js" as="script"><link rel="prefetch" href="/assets/03.StyleInheritance.html-eea24806.js" as="script"><link rel="prefetch" href="/assets/04.Units.html-5fad8fff.js" as="script"><link rel="prefetch" href="/assets/05.DocumentFlow.html-4c0ed5a1.js" as="script"><link rel="prefetch" href="/assets/06.div.html-f925a0e8.js" as="script"><link rel="prefetch" href="/assets/07.float.html-658db41e.js" as="script"><link rel="prefetch" href="/assets/08.flex.html-f8dd3c59.js" as="script"><link rel="prefetch" href="/assets/09.Position.html-0fd9a79b.js" as="script"><link rel="prefetch" href="/assets/10.Font_Background.html-414665ab.js" as="script"><link rel="prefetch" href="/assets/11.Table_Form.html-57ef1a73.js" as="script"><link rel="prefetch" href="/assets/12.Animation.html-1a1e34c5.js" as="script"><link rel="prefetch" href="/assets/index.html-b0d8d2e7.js" as="script"><link rel="prefetch" href="/assets/01.index.html-8f970150.js" as="script"><link rel="prefetch" href="/assets/02.instructor.html-94d3e5c9.js" as="script"><link rel="prefetch" href="/assets/03.ComputedAttributes.html-dc89ff8c.js" as="script"><link rel="prefetch" href="/assets/04.filter.html-79b35790.js" as="script"><link rel="prefetch" href="/assets/05.LifeCycleEvents.html-24fc60c7.js" as="script"><link rel="prefetch" href="/assets/06.Components.html-93626672.js" as="script"><link rel="prefetch" href="/assets/07.Plugins.html-8daef2ef.js" as="script"><link rel="prefetch" href="/assets/index.html-711d8e95.js" as="script"><link rel="prefetch" href="/assets/01.index.html-e438a729.js" as="script"><link rel="prefetch" href="/assets/index.html-8ed4b81e.js" as="script"><link rel="prefetch" href="/assets/404.html-22f88149.js" as="script"><link rel="prefetch" href="/assets/index.html-5ca91490.js" as="script"><link rel="prefetch" href="/assets/index.html-c8862c87.js" as="script"><link rel="prefetch" href="/assets/index.html-f5676493.js" as="script"><link rel="prefetch" href="/assets/index.html-dd12c8d0.js" as="script"><link rel="prefetch" href="/assets/index.html-a3570177.js" as="script"><link rel="prefetch" href="/assets/index.html-94aad3b6.js" as="script"><link rel="prefetch" href="/assets/index.html-3d61d62c.js" as="script"><link rel="prefetch" href="/assets/index.html-34850795.js" as="script"><link rel="prefetch" href="/assets/index.html-80dfed09.js" as="script"><link rel="prefetch" href="/assets/index.html-3635ca75.js" as="script"><link rel="prefetch" href="/assets/index.html-2a23a78f.js" as="script"><link rel="prefetch" href="/assets/index.html-99437dda.js" as="script"><link rel="prefetch" href="/assets/index.html-8a70f073.js" as="script"><link rel="prefetch" href="/assets/index.html-d81846fb.js" as="script"><link rel="prefetch" href="/assets/index.html-3035c392.js" as="script"><link rel="prefetch" href="/assets/index.html-a2b9318f.js" as="script"><link rel="prefetch" href="/assets/index.html-bae90be0.js" as="script"><link rel="prefetch" href="/assets/index.html-4916714b.js" as="script"><link rel="prefetch" href="/assets/index.html-d0c8277b.js" as="script"><link rel="prefetch" href="/assets/index.html-a02a22a7.js" as="script"><link rel="prefetch" href="/assets/index.html-1b626961.js" as="script"><link rel="prefetch" href="/assets/index.html-97ef5b56.js" as="script"><link rel="prefetch" href="/assets/index.html-e0fba5cf.js" as="script"><link rel="prefetch" href="/assets/index.html-213baae1.js" as="script"><link rel="prefetch" href="/assets/index.html-0e1dd573.js" as="script"><link rel="prefetch" href="/assets/index.html-0edabd56.js" as="script"><link rel="prefetch" href="/assets/index.html-92b70ed4.js" as="script"><link rel="prefetch" href="/assets/index.html-effa6885.js" as="script"><link rel="prefetch" href="/assets/index.html-9b844995.js" as="script"><link rel="prefetch" href="/assets/index.html-60f1e5a5.js" as="script"><link rel="prefetch" href="/assets/index.html-60418c5e.js" as="script"><link rel="prefetch" href="/assets/index.html-03c98f20.js" as="script"><link rel="prefetch" href="/assets/index.html-1bff4bdd.js" as="script"><link rel="prefetch" href="/assets/index.html-5bade2fd.js" as="script"><link rel="prefetch" href="/assets/index.html-428ca079.js" as="script"><link rel="prefetch" href="/assets/index.html-7359f7a5.js" as="script"><link rel="prefetch" href="/assets/index.html-ea751cdd.js" as="script"><link rel="prefetch" href="/assets/index.html-186e2861.js" as="script"><link rel="prefetch" href="/assets/index.html-2e6e597a.js" as="script"><link rel="prefetch" href="/assets/index.html-82780aa1.js" as="script"><link rel="prefetch" href="/assets/index.html-f53400be.js" as="script"><link rel="prefetch" href="/assets/index.html-3f537094.js" as="script"><link rel="prefetch" href="/assets/index.html-d87b27fd.js" as="script"><link rel="prefetch" href="/assets/index.html-2f6be5a0.js" as="script"><link rel="prefetch" href="/assets/index.html-407c00cf.js" as="script"><link rel="prefetch" href="/assets/index.html-54c9927e.js" as="script"><link rel="prefetch" href="/assets/index.html-e7568779.js" as="script"><link rel="prefetch" href="/assets/index.html-2d8f4b30.js" as="script"><link rel="prefetch" href="/assets/index.html-758fefae.js" as="script"><link rel="prefetch" href="/assets/index.html-de259da6.js" as="script"><link rel="prefetch" href="/assets/index.html-eb85b9e6.js" as="script"><link rel="prefetch" href="/assets/index.html-71106a2f.js" as="script"><link rel="prefetch" href="/assets/index.html-3c620d40.js" as="script"><link rel="prefetch" href="/assets/index.html-826969c7.js" as="script"><link rel="prefetch" href="/assets/index.html-23b4ba33.js" as="script"><link rel="prefetch" href="/assets/index.html-7cccc6ec.js" as="script"><link rel="prefetch" href="/assets/index.html-6ca2fb23.js" as="script"><link rel="prefetch" href="/assets/index.html-5f709309.js" as="script"><link rel="prefetch" href="/assets/index.html-bfd4f3b3.js" as="script"><link rel="prefetch" href="/assets/index.html-673d374e.js" as="script"><link rel="prefetch" href="/assets/index.html-9ce4d630.js" as="script"><link rel="prefetch" href="/assets/index.html-360d5647.js" as="script"><link rel="prefetch" href="/assets/index.html-5afd0f1b.js" as="script"><link rel="prefetch" href="/assets/index.html-b1101840.js" as="script"><link rel="prefetch" href="/assets/index.html-2f1aec35.js" as="script"><link rel="prefetch" href="/assets/intro.html-7283667d.js" as="script"><link rel="prefetch" href="/assets/index.html-e811424a.js" as="script"><link rel="prefetch" href="/assets/OpenVoiceVoiceCloing.html-466d2e44.js" as="script"><link rel="prefetch" href="/assets/index.html-f7932287.js" as="script"><link rel="prefetch" href="/assets/ai_models.html-49df3673.js" as="script"><link rel="prefetch" href="/assets/cuda.html-97a3d16f.js" as="script"><link rel="prefetch" href="/assets/fine-tune.html-455d77af.js" as="script"><link rel="prefetch" href="/assets/pytorch_finetune.html-4ca116d1.js" as="script"><link rel="prefetch" href="/assets/Amplify.html-add3735e.js" as="script"><link rel="prefetch" href="/assets/index.html-3f1ee1d5.js" as="script"><link rel="prefetch" href="/assets/index.html-cd76d149.js" as="script"><link rel="prefetch" href="/assets/Techniques.html-f4b69380.js" as="script"><link rel="prefetch" href="/assets/index.html-56bbfe14.js" as="script"><link rel="prefetch" href="/assets/index.html-944fa2c8.js" as="script"><link rel="prefetch" href="/assets/make.html-b662e0dc.js" as="script"><link rel="prefetch" href="/assets/test.html-f3817c09.js" as="script"><link rel="prefetch" href="/assets/01.basic_usuage.html-10cbec93.js" as="script"><link rel="prefetch" href="/assets/index.html-99c5ae4e.js" as="script"><link rel="prefetch" href="/assets/index.html-18244309.js" as="script"><link rel="prefetch" href="/assets/q_a.html-5bde60ac.js" as="script"><link rel="prefetch" href="/assets/index.html-5345b8b3.js" as="script"><link rel="prefetch" href="/assets/enlarge.html-2f763f02.js" as="script"><link rel="prefetch" href="/assets/gcptowarp.html-a8546ccc.js" as="script"><link rel="prefetch" href="/assets/pythonwithgdal.html-1656ce65.js" as="script"><link rel="prefetch" href="/assets/resources.html-94df499a.js" as="script"><link rel="prefetch" href="/assets/vivid_retrive_and_analysis.html-9624e1a3.js" as="script"><link rel="prefetch" href="/assets/index.html-994c1286.js" as="script"><link rel="prefetch" href="/assets/basic_usage.html-ec2d194e.js" as="script"><link rel="prefetch" href="/assets/gitee.html-cd98ee63.js" as="script"><link rel="prefetch" href="/assets/post_site_using_git.html-d18a0445.js" as="script"><link rel="prefetch" href="/assets/problems.html-309ee524.js" as="script"><link rel="prefetch" href="/assets/index.html-3ea73885.js" as="script"><link rel="prefetch" href="/assets/proxy.html-2e6d0056.js" as="script"><link rel="prefetch" href="/assets/index.html-cf0412b4.js" as="script"><link rel="prefetch" href="/assets/index.html-27937ee7.js" as="script"><link rel="prefetch" href="/assets/basic.html-ba4ae7d3.js" as="script"><link rel="prefetch" href="/assets/index.html-4b7635ca.js" as="script"><link rel="prefetch" href="/assets/UltraVNC.html-6f2a13e6.js" as="script"><link rel="prefetch" href="/assets/academic.html-aa6d1b56.js" as="script"><link rel="prefetch" href="/assets/kms.html-3fd274cc.js" as="script"><link rel="prefetch" href="/assets/notion.html-553b3da0.js" as="script"><link rel="prefetch" href="/assets/index.html-66de6863.js" as="script"><link rel="prefetch" href="/assets/q_a.html-9221400e.js" as="script"><link rel="prefetch" href="/assets/index.html-17b40a90.js" as="script"><link rel="prefetch" href="/assets/ssh.html-6796341c.js" as="script"><link rel="prefetch" href="/assets/index.html-17ff3338.js" as="script"><link rel="prefetch" href="/assets/peft_docs.html-b1ad4b93.js" as="script"><link rel="prefetch" href="/assets/index.html-ecdd504a.js" as="script"><link rel="prefetch" href="/assets/01.R Language.html-fbdbfd0e.js" as="script"><link rel="prefetch" href="/assets/02.Statistical tests.html-2f8bb3d0.js" as="script"><link rel="prefetch" href="/assets/03.Data manipulation.html-759499d8.js" as="script"><link rel="prefetch" href="/assets/index.html-c8865ec7.js" as="script"><link rel="prefetch" href="/assets/01.Basic.html-7c508e55.js" as="script"><link rel="prefetch" href="/assets/index.html-b95a331c.js" as="script"><link rel="prefetch" href="/assets/index.html-4448fcca.js" as="script"><link rel="prefetch" href="/assets/html.html-4e84f576.js" as="script"><link rel="prefetch" href="/assets/libraries.html-85ea1ce9.js" as="script"><link rel="prefetch" href="/assets/Numpy.html-4ed8775a.js" as="script"><link rel="prefetch" href="/assets/Pandas.html-6f22918c.js" as="script"><link rel="prefetch" href="/assets/index.html-140a535c.js" as="script"><link rel="prefetch" href="/assets/SeniorFunction.html-5562252f.js" as="script"><link rel="prefetch" href="/assets/SingleClass.html-77ceb3df.js" as="script"><link rel="prefetch" href="/assets/VirtualEnvironment.html-babe7d9e.js" as="script"><link rel="prefetch" href="/assets/csv.html-5b95bcb4.js" as="script"><link rel="prefetch" href="/assets/env.html-b8a04ef8.js" as="script"><link rel="prefetch" href="/assets/http.html-f4303de6.js" as="script"><link rel="prefetch" href="/assets/jupyter.html-0c3cf331.js" as="script"><link rel="prefetch" href="/assets/logging.html-5bc9ae99.js" as="script"><link rel="prefetch" href="/assets/pip.html-508de121.js" as="script"><link rel="prefetch" href="/assets/psql_conn_pool.html-d9453134.js" as="script"><link rel="prefetch" href="/assets/thread.html-c1fbcc83.js" as="script"><link rel="prefetch" href="/assets/01.index.html-41ffe8e6.js" as="script"><link rel="prefetch" href="/assets/02.Common_conf.html-bfe28c0c.js" as="script"><link rel="prefetch" href="/assets/03.Examples.html-6d3b038f.js" as="script"><link rel="prefetch" href="/assets/04.Interceptor.html-10cdda28.js" as="script"><link rel="prefetch" href="/assets/index.html-9f7469de.js" as="script"><link rel="prefetch" href="/assets/01.index.html-51bd979f.js" as="script"><link rel="prefetch" href="/assets/02.selector.html-486b6e44.js" as="script"><link rel="prefetch" href="/assets/03.StyleInheritance.html-f75ab691.js" as="script"><link rel="prefetch" href="/assets/04.Units.html-40c1d9d5.js" as="script"><link rel="prefetch" href="/assets/05.DocumentFlow.html-4826b4e8.js" as="script"><link rel="prefetch" href="/assets/06.div.html-c24af395.js" as="script"><link rel="prefetch" href="/assets/07.float.html-97de0166.js" as="script"><link rel="prefetch" href="/assets/08.flex.html-7e83776d.js" as="script"><link rel="prefetch" href="/assets/09.Position.html-6f78dc03.js" as="script"><link rel="prefetch" href="/assets/10.Font_Background.html-d78a00fd.js" as="script"><link rel="prefetch" href="/assets/11.Table_Form.html-ab3da3f1.js" as="script"><link rel="prefetch" href="/assets/12.Animation.html-65f2cc6c.js" as="script"><link rel="prefetch" href="/assets/index.html-735d82cf.js" as="script"><link rel="prefetch" href="/assets/01.index.html-fd2dbcab.js" as="script"><link rel="prefetch" href="/assets/02.instructor.html-e3ceedcf.js" as="script"><link rel="prefetch" href="/assets/03.ComputedAttributes.html-43e8048a.js" as="script"><link rel="prefetch" href="/assets/04.filter.html-d39d0668.js" as="script"><link rel="prefetch" href="/assets/05.LifeCycleEvents.html-3a64d123.js" as="script"><link rel="prefetch" href="/assets/06.Components.html-d4a87667.js" as="script"><link rel="prefetch" href="/assets/07.Plugins.html-33784696.js" as="script"><link rel="prefetch" href="/assets/index.html-6fc68820.js" as="script"><link rel="prefetch" href="/assets/01.index.html-c955554c.js" as="script"><link rel="prefetch" href="/assets/index.html-1a48aa92.js" as="script"><link rel="prefetch" href="/assets/404.html-c286d0a7.js" as="script"><link rel="prefetch" href="/assets/index.html-8b00ddf9.js" as="script"><link rel="prefetch" href="/assets/index.html-597280c7.js" as="script"><link rel="prefetch" href="/assets/index.html-84e18699.js" as="script"><link rel="prefetch" href="/assets/index.html-cfd9fe8e.js" as="script"><link rel="prefetch" href="/assets/index.html-bdd063d3.js" as="script"><link rel="prefetch" href="/assets/index.html-d1bb5a37.js" as="script"><link rel="prefetch" href="/assets/index.html-0d7ef051.js" as="script"><link rel="prefetch" href="/assets/index.html-2ffe7429.js" as="script"><link rel="prefetch" href="/assets/index.html-9b2bb8da.js" as="script"><link rel="prefetch" href="/assets/index.html-7756b5fc.js" as="script"><link rel="prefetch" href="/assets/index.html-b2cf5ccc.js" as="script"><link rel="prefetch" href="/assets/index.html-b1d8739f.js" as="script"><link rel="prefetch" href="/assets/index.html-24ab1cad.js" as="script"><link rel="prefetch" href="/assets/index.html-d401597e.js" as="script"><link rel="prefetch" href="/assets/index.html-5845d430.js" as="script"><link rel="prefetch" href="/assets/index.html-801e477a.js" as="script"><link rel="prefetch" href="/assets/index.html-86df967e.js" as="script"><link rel="prefetch" href="/assets/index.html-7ae0f531.js" as="script"><link rel="prefetch" href="/assets/index.html-9ccdd254.js" as="script"><link rel="prefetch" href="/assets/index.html-cb09d49e.js" as="script"><link rel="prefetch" href="/assets/index.html-8dda0491.js" as="script"><link rel="prefetch" href="/assets/index.html-4c722d2c.js" as="script"><link rel="prefetch" href="/assets/index.html-fef867af.js" as="script"><link rel="prefetch" href="/assets/index.html-eacdd5a4.js" as="script"><link rel="prefetch" href="/assets/index.html-1186fd63.js" as="script"><link rel="prefetch" href="/assets/index.html-9426c26d.js" as="script"><link rel="prefetch" href="/assets/index.html-82d57533.js" as="script"><link rel="prefetch" href="/assets/index.html-2613d836.js" as="script"><link rel="prefetch" href="/assets/index.html-ebbf0522.js" as="script"><link rel="prefetch" href="/assets/index.html-2494298f.js" as="script"><link rel="prefetch" href="/assets/index.html-18e84c11.js" as="script"><link rel="prefetch" href="/assets/index.html-051bcdc3.js" as="script"><link rel="prefetch" href="/assets/index.html-31f57d75.js" as="script"><link rel="prefetch" href="/assets/index.html-e1b3a580.js" as="script"><link rel="prefetch" href="/assets/index.html-4325362a.js" as="script"><link rel="prefetch" href="/assets/index.html-3a7ddc02.js" as="script"><link rel="prefetch" href="/assets/index.html-fafb470a.js" as="script"><link rel="prefetch" href="/assets/index.html-06f76698.js" as="script"><link rel="prefetch" href="/assets/index.html-3bc2d4ad.js" as="script"><link rel="prefetch" href="/assets/index.html-c2e019f4.js" as="script"><link rel="prefetch" href="/assets/index.html-ff39a9ec.js" as="script"><link rel="prefetch" href="/assets/index.html-c6d25245.js" as="script"><link rel="prefetch" href="/assets/index.html-71acaffe.js" as="script"><link rel="prefetch" href="/assets/index.html-dd82e917.js" as="script"><link rel="prefetch" href="/assets/index.html-a675b792.js" as="script"><link rel="prefetch" href="/assets/index.html-e3e77f33.js" as="script"><link rel="prefetch" href="/assets/index.html-a6447d04.js" as="script"><link rel="prefetch" href="/assets/index.html-433dd8bd.js" as="script"><link rel="prefetch" href="/assets/index.html-b74dfedc.js" as="script"><link rel="prefetch" href="/assets/index.html-f1d9e064.js" as="script"><link rel="prefetch" href="/assets/index.html-d6d617c8.js" as="script"><link rel="prefetch" href="/assets/index.html-f00fa378.js" as="script"><link rel="prefetch" href="/assets/index.html-768367c6.js" as="script"><link rel="prefetch" href="/assets/index.html-6a7e949e.js" as="script"><link rel="prefetch" href="/assets/index.html-652eef94.js" as="script"><link rel="prefetch" href="/assets/index.html-531608cb.js" as="script"><link rel="prefetch" href="/assets/index.html-bd708b5b.js" as="script"><link rel="prefetch" href="/assets/index.html-35306c33.js" as="script"><link rel="prefetch" href="/assets/index.html-ed44d5aa.js" as="script"><link rel="prefetch" href="/assets/index.html-0f3d0c95.js" as="script"><link rel="prefetch" href="/assets/index.html-173f369e.js" as="script"><link rel="prefetch" href="/assets/index.html-c364bdb2.js" as="script"><link rel="prefetch" href="/assets/index.html-65dae346.js" as="script"><link rel="prefetch" href="/assets/index.html-9afa6cdf.js" as="script"><link rel="prefetch" href="/assets/plyr.min-fe499837.js" as="script"><link rel="prefetch" href="/assets/auto-fa8841cf.js" as="script"><link rel="prefetch" href="/assets/index-ae8c1e74.js" as="script"><link rel="prefetch" href="/assets/flowchart-d65a1d8e.js" as="script"><link rel="prefetch" href="/assets/mermaid.core-5441e5a6.js" as="script"><link rel="prefetch" href="/assets/highlight.esm-75b11b9d.js" as="script"><link rel="prefetch" href="/assets/markdown.esm-0191f9da.js" as="script"><link rel="prefetch" href="/assets/math.esm-70a288c8.js" as="script"><link rel="prefetch" href="/assets/notes.esm-a106bb2c.js" as="script"><link rel="prefetch" href="/assets/reveal.esm-ec5549c1.js" as="script"><link rel="prefetch" href="/assets/search.esm-7e6792e2.js" as="script"><link rel="prefetch" href="/assets/zoom.esm-b83b91d0.js" as="script"><link rel="prefetch" href="/assets/VuePlayground-d1fb5ee8.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-5794cde2.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><!--[--><!--[--><span tabindex="-1"></span><a href="#main-content" class="vp-skip-link sr-only">Skip to main content</a><!--]--><div class="theme-container has-toc"><!--[--><header id="navbar" class="vp-navbar"><div class="vp-navbar-start"><button type="button" class="vp-toggle-sidebar-button" title="Toggle Sidebar"><span class="icon"></span></button><!--[--><!----><!--]--><!--[--><a class="vp-link vp-brand" href="/"><img class="vp-nav-logo" src="/haiyue.jpg" alt="Haiyue&#39;s Blog"><!----><span class="vp-site-name hide-in-pad">Haiyue&#39;s Blog</span></a><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-center"><!--[--><!----><!--]--><!--[--><nav class="vp-nav-links"><div class="nav-item hide-in-mobile"><a class="vp-link nav-link" href="/"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>Blog Home<!----></a></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Techniques"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-building-columns" style=""></span>Techniques</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/techniques/geoscience/gcptowarp.html"><!---->Geoscience<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/techniques/GogoleColab/Techniques.html"><!---->Google Colab<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/techniques/openai/basic.html"><!---->OpenAI<!----></a></li></ul></button></div></div><div class="nav-item hide-in-mobile"><div class="dropdown-wrapper"><button type="button" class="dropdown-title" aria-label="Coding"><span class="title"><span class="font-icon icon fa-fw fa-sm fas fa-building-columns" style=""></span>Coding</span><span class="arrow"></span><ul class="nav-dropdown"><li class="dropdown-item"><a class="vp-link nav-link" href="/techniques/coding/R.html"><!---->R<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/techniques/coding/python.html"><!---->Python<!----></a></li><li class="dropdown-item"><a class="vp-link nav-link" href="/techniques/coding/Ruby.html"><!---->Ruby<!----></a></li></ul></button></div></div></nav><!--]--><!--[--><!----><!--]--></div><div class="vp-navbar-end"><!--[--><!----><!--]--><!--[--><!----><!----><div class="nav-item hide-in-mobile"><button type="button" id="appearance-switch"><svg xmlns="http://www.w3.org/2000/svg" class="icon auto-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="auto icon" style="display:block;"><path d="M512 992C246.92 992 32 777.08 32 512S246.92 32 512 32s480 214.92 480 480-214.92 480-480 480zm0-840c-198.78 0-360 161.22-360 360 0 198.84 161.22 360 360 360s360-161.16 360-360c0-198.78-161.22-360-360-360zm0 660V212c165.72 0 300 134.34 300 300 0 165.72-134.28 300-300 300z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon dark-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="dark icon" style="display:none;"><path d="M524.8 938.667h-4.267a439.893 439.893 0 0 1-313.173-134.4 446.293 446.293 0 0 1-11.093-597.334A432.213 432.213 0 0 1 366.933 90.027a42.667 42.667 0 0 1 45.227 9.386 42.667 42.667 0 0 1 10.24 42.667 358.4 358.4 0 0 0 82.773 375.893 361.387 361.387 0 0 0 376.747 82.774 42.667 42.667 0 0 1 54.187 55.04 433.493 433.493 0 0 1-99.84 154.88 438.613 438.613 0 0 1-311.467 128z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon light-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="light icon" style="display:none;"><path d="M952 552h-80a40 40 0 0 1 0-80h80a40 40 0 0 1 0 80zM801.88 280.08a41 41 0 0 1-57.96-57.96l57.96-58a41.04 41.04 0 0 1 58 58l-58 57.96zM512 752a240 240 0 1 1 0-480 240 240 0 0 1 0 480zm0-560a40 40 0 0 1-40-40V72a40 40 0 0 1 80 0v80a40 40 0 0 1-40 40zm-289.88 88.08-58-57.96a41.04 41.04 0 0 1 58-58l57.96 58a41 41 0 0 1-57.96 57.96zM192 512a40 40 0 0 1-40 40H72a40 40 0 0 1 0-80h80a40 40 0 0 1 40 40zm30.12 231.92a41 41 0 0 1 57.96 57.96l-57.96 58a41.04 41.04 0 0 1-58-58l58-57.96zM512 832a40 40 0 0 1 40 40v80a40 40 0 0 1-80 0v-80a40 40 0 0 1 40-40zm289.88-88.08 58 57.96a41.04 41.04 0 0 1-58 58l-57.96-58a41 41 0 0 1 57.96-57.96z"></path></svg></button></div><!----><!--]--><!--[--><!----><!--]--><button type="button" class="vp-toggle-navbar-button" aria-label="Toggle Navbar" aria-expanded="false" aria-controls="nav-screen"><span><span class="vp-top"></span><span class="vp-middle"></span><span class="vp-bottom"></span></span></button></div></header><!----><!--]--><!----><div class="toggle-sidebar-wrapper"><span class="arrow start"></span></div><aside id="sidebar" class="vp-sidebar"><!--[--><!----><!--]--><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/"><span class="font-icon icon fa-fw fa-sm fas fa-home" style=""></span>Blog Home<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><p class="vp-sidebar-heading active"><span class="font-icon icon fa-fw fa-sm fas fa-book" style=""></span><span class="vp-sidebar-title">Techniques</span><!----></p><ul class="vp-sidebar-links"><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable active" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-list-check" style=""></span><span class="vp-sidebar-title">AI Related</span><span class="vp-arrow down"></span></button><ul class="vp-sidebar-links"><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/techniques/AI/ai_models.html"><span class="font-icon icon fa-fw fa-sm fas fa-circle-dot" style=""></span>AI Models List<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link active vp-sidebar-link vp-sidebar-page active" href="/techniques/AI/DeepSpeech2Text.html"><span class="font-icon icon fa-fw fa-sm fas fa-circle-dot" style=""></span>Audio to Text (DeepSpeech)<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/AI/DeepSpeech2Text.html#what-is-deepspeech"><!---->What is DeepSpeech<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/AI/DeepSpeech2Text.html#local-speech-to-text"><!---->Local Speech to Text<!----></a><ul class="vp-sidebar-sub-headers"><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/AI/DeepSpeech2Text.html#wav-handler"><!---->WAV Handler<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/AI/DeepSpeech2Text.html#transcribe-speech-to-text"><!---->Transcribe Speech to Text<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/AI/DeepSpeech2Text.html#reading-arguments-for-deepspeech-speech-to-text"><!---->Reading Arguments for DeepSpeech Speech to Text<!----></a><ul class="vp-sidebar-sub-headers"></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/AI/DeepSpeech2Text.html#using-deepspeech-for-real-time-or-asynchronous-speech-recognition"><!---->Using DeepSpeech for Real Time or Asynchronous Speech Recognition<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul></li><li class="vp-sidebar-sub-header"><a class="vp-link nav-link vp-sidebar-link vp-heading" href="/techniques/AI/DeepSpeech2Text.html#resource"><!---->Resource<!----></a><ul class="vp-sidebar-sub-headers"></ul></li></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/techniques/AI/cuda.html"><span class="font-icon icon fa-fw fa-sm fas fa-circle-dot" style=""></span>CUDA Torch<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/techniques/AI/pytorch_finetune.html"><span class="font-icon icon fa-fw fa-sm fas fa-circle-dot" style=""></span>Fine Tune Models<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/techniques/AI/fine-tune.html"><span class="font-icon icon fa-fw fa-sm fas fa-circle-dot" style=""></span>Fine-tune for Models<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/techniques/AI/OpenVoiceVoiceCloing.html"><span class="font-icon icon fa-fw fa-sm fas fa-circle-dot" style=""></span>OpenVoice Voice Cloning<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-list-check" style=""></span><span class="vp-sidebar-title">PEFT</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-list-check" style=""></span><span class="vp-sidebar-title">AWS</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-list-check" style=""></span><span class="vp-sidebar-title">Coding</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-list-check" style=""></span><span class="vp-sidebar-title">Docker</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-list-check" style=""></span><span class="vp-sidebar-title">ffmpeg</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-list-check" style=""></span><span class="vp-sidebar-title">Geoscience</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-list-check" style=""></span><span class="vp-sidebar-title">Git &amp; Github</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-list-check" style=""></span><span class="vp-sidebar-title">Google Colab</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-list-check" style=""></span><span class="vp-sidebar-title">Math</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-list-check" style=""></span><span class="vp-sidebar-title">Nginx</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-list-check" style=""></span><span class="vp-sidebar-title">Nodejs</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-list-check" style=""></span><span class="vp-sidebar-title">OpenAI</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-list-check" style=""></span><span class="vp-sidebar-title">Others</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-list-check" style=""></span><span class="vp-sidebar-title">Streamlit</span><span class="vp-arrow end"></span></button><!----></section></li><li><section class="vp-sidebar-group"><button class="vp-sidebar-heading clickable" type="button"><span class="font-icon icon fa-fw fa-sm fas fa-list-check" style=""></span><span class="vp-sidebar-title">Ubuntu Related</span><span class="vp-arrow end"></span></button><!----></section></li></ul></section></li><li><!--[--><a class="vp-link nav-link vp-sidebar-link vp-sidebar-page" href="/intro.html"><span class="font-icon icon fa-fw fa-sm fas fa-user" style=""></span>Details of me<!----></a><ul class="vp-sidebar-sub-headers"></ul><!--]--></li></ul><!--[--><!----><!--]--></aside><!--[--><main id="main-content" class="vp-page"><!--[--><!----><!----><nav class="vp-breadcrumb disable"></nav><div class="vp-page-title"><h1><span class="font-icon icon fa-fw fa-sm fas fa-circle-dot" style=""></span>Audio to Text (DeepSpeech)</h1><div class="page-info"><span class="page-author-info" aria-label="AuthorðŸ–Š" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon author-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="author icon"><path d="M649.6 633.6c86.4-48 147.2-144 147.2-249.6 0-160-128-288-288-288s-288 128-288 288c0 108.8 57.6 201.6 147.2 249.6-121.6 48-214.4 153.6-240 288-3.2 9.6 0 19.2 6.4 25.6 3.2 9.6 12.8 12.8 22.4 12.8h704c9.6 0 19.2-3.2 25.6-12.8 6.4-6.4 9.6-16 6.4-25.6-25.6-134.4-121.6-240-243.2-288z"></path></svg><span><span class="page-author-item">Haiyue</span></span><span property="author" content="Haiyue"></span></span><!----><span class="page-date-info" aria-label="Writing DateðŸ“…" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon calendar-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="calendar icon"><path d="M716.4 110.137c0-18.753-14.72-33.473-33.472-33.473-18.753 0-33.473 14.72-33.473 33.473v33.473h66.993v-33.473zm-334.87 0c0-18.753-14.72-33.473-33.473-33.473s-33.52 14.72-33.52 33.473v33.473h66.993v-33.473zm468.81 33.52H716.4v100.465c0 18.753-14.72 33.473-33.472 33.473a33.145 33.145 0 01-33.473-33.473V143.657H381.53v100.465c0 18.753-14.72 33.473-33.473 33.473a33.145 33.145 0 01-33.473-33.473V143.657H180.6A134.314 134.314 0 0046.66 277.595v535.756A134.314 134.314 0 00180.6 947.289h669.74a134.36 134.36 0 00133.94-133.938V277.595a134.314 134.314 0 00-133.94-133.938zm33.473 267.877H147.126a33.145 33.145 0 01-33.473-33.473c0-18.752 14.72-33.473 33.473-33.473h736.687c18.752 0 33.472 14.72 33.472 33.473a33.145 33.145 0 01-33.472 33.473z"></path></svg><span><!----></span><meta property="datePublished" content="2023-11-27T00:00:00.000Z"></span><!----><span class="page-reading-time-info" aria-label="Reading TimeâŒ›" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon timer-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="timer icon"><path d="M799.387 122.15c4.402-2.978 7.38-7.897 7.38-13.463v-1.165c0-8.933-7.38-16.312-16.312-16.312H256.33c-8.933 0-16.311 7.38-16.311 16.312v1.165c0 5.825 2.977 10.874 7.637 13.592 4.143 194.44 97.22 354.963 220.201 392.763-122.204 37.542-214.893 196.511-220.2 389.397-4.661 5.049-7.638 11.651-7.638 19.03v5.825h566.49v-5.825c0-7.379-2.849-13.981-7.509-18.9-5.049-193.016-97.867-351.985-220.2-389.527 123.24-37.67 216.446-198.453 220.588-392.892zM531.16 450.445v352.632c117.674 1.553 211.787 40.778 211.787 88.676H304.097c0-48.286 95.149-87.382 213.728-88.676V450.445c-93.077-3.107-167.901-81.297-167.901-177.093 0-8.803 6.99-15.793 15.793-15.793 8.803 0 15.794 6.99 15.794 15.793 0 80.261 63.69 145.635 142.01 145.635s142.011-65.374 142.011-145.635c0-8.803 6.99-15.793 15.794-15.793s15.793 6.99 15.793 15.793c0 95.019-73.789 172.82-165.96 177.093z"></path></svg><span>About 8 min</span><meta property="timeRequired" content="PT8M"></span><span class="page-category-info" aria-label="CategoryðŸŒˆ" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon category-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="category icon"><path d="M148.41 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H148.41c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.311-40.31zM147.556 553.478H429.73c22.263 0 40.311 18.048 40.311 40.31v282.176c0 22.263-18.048 40.312-40.31 40.312H147.555c-22.263 0-40.311-18.049-40.311-40.312V593.79c0-22.263 18.048-40.311 40.31-40.311zM593.927 106.992h282.176c22.263 0 40.31 18.048 40.31 40.31V429.48c0 22.263-18.047 40.31-40.31 40.31H593.927c-22.263 0-40.311-18.047-40.311-40.31V147.302c0-22.263 18.048-40.31 40.31-40.31zM730.22 920.502H623.926c-40.925 0-74.22-33.388-74.22-74.425V623.992c0-41.038 33.387-74.424 74.425-74.424h222.085c41.038 0 74.424 33.226 74.424 74.067v114.233c0 10.244-8.304 18.548-18.547 18.548s-18.548-8.304-18.548-18.548V623.635c0-20.388-16.746-36.974-37.33-36.974H624.13c-20.585 0-37.331 16.747-37.331 37.33v222.086c0 20.585 16.654 37.331 37.126 37.331H730.22c10.243 0 18.547 8.304 18.547 18.547 0 10.244-8.304 18.547-18.547 18.547z"></path></svg><!--[--><span class="page-category-item category3 clickable" role="navigation">AI</span><!--]--><meta property="articleSection" content="AI"></span><span class="page-tag-info" aria-label="TagðŸ·" data-balloon-pos="down"><svg xmlns="http://www.w3.org/2000/svg" class="icon tag-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="tag icon"><path d="M939.902 458.563L910.17 144.567c-1.507-16.272-14.465-29.13-30.737-30.737L565.438 84.098h-.402c-3.215 0-5.726 1.005-7.634 2.913l-470.39 470.39a10.004 10.004 0 000 14.164l365.423 365.424c1.909 1.908 4.42 2.913 7.132 2.913s5.223-1.005 7.132-2.913l470.39-470.39c2.01-2.11 3.014-5.023 2.813-8.036zm-240.067-72.121c-35.458 0-64.286-28.828-64.286-64.286s28.828-64.285 64.286-64.285 64.286 28.828 64.286 64.285-28.829 64.286-64.286 64.286z"></path></svg><!--[--><span class="page-tag-item tag3 clickable" role="navigation">audio2text</span><!--]--><meta property="keywords" content="audio2text"></span></div><hr></div><div class="toc-place-holder"><aside id="toc"><!--[--><!----><!--]--><div class="toc-header">On This Page<button type="button" class="print-button" title="Print"><svg xmlns="http://www.w3.org/2000/svg" class="icon print-icon" viewBox="0 0 1024 1024" fill="currentColor" aria-label="print icon"><path d="M819.2 364.8h-44.8V128c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v236.8h-44.8C145.067 364.8 96 413.867 96 473.6v192c0 59.733 49.067 108.8 108.8 108.8h44.8V896c0 17.067 14.933 32 32 32h460.8c17.067 0 32-14.933 32-32V774.4h44.8c59.733 0 108.8-49.067 108.8-108.8v-192c0-59.733-49.067-108.8-108.8-108.8zM313.6 160h396.8v204.8H313.6V160zm396.8 704H313.6V620.8h396.8V864zM864 665.6c0 25.6-19.2 44.8-44.8 44.8h-44.8V588.8c0-17.067-14.933-32-32-32H281.6c-17.067 0-32 14.933-32 32v121.6h-44.8c-25.6 0-44.8-19.2-44.8-44.8v-192c0-25.6 19.2-44.8 44.8-44.8h614.4c25.6 0 44.8 19.2 44.8 44.8v192z"></path></svg></button></div><div class="toc-wrapper"><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#what-is-deepspeech">What is DeepSpeech</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#local-speech-to-text">Local Speech to Text</a></li><li><ul class="toc-list"><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#wav-handler">WAV Handler</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#transcribe-speech-to-text">Transcribe Speech to Text</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#reading-arguments-for-deepspeech-speech-to-text">Reading Arguments for DeepSpeech Speech to Text</a></li><!----><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level3" href="/#using-deepspeech-for-real-time-or-asynchronous-speech-recognition">Using DeepSpeech for Real Time or Asynchronous Speech Recognition</a></li><!----><!--]--></ul></li><!--]--><!--[--><li class="toc-item"><a class="vp-link toc-link level2" href="/#resource">Resource</a></li><!----><!--]--></ul><div class="toc-marker" style="top:-1.7rem;"></div></div><!--[--><!----><!--]--></aside></div><!----><div class="theme-hope-content"><h2 id="what-is-deepspeech" tabindex="-1"><a class="header-anchor" href="#what-is-deepspeech" aria-hidden="true">#</a> What is DeepSpeech</h2><p>DeepSpeech is an open source Python library that enables us to build automatic speech ecognition systems. It is based on Baiduâ€™s 2014 paper titled <a href="https://arxiv.org/abs/1412.5567" target="_blank" rel="noopener noreferrer">Deep Speech: Scaling up end-to-end speech recognition<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><h2 id="local-speech-to-text" tabindex="-1"><a class="header-anchor" href="#local-speech-to-text" aria-hidden="true">#</a> Local Speech to Text</h2><p>The libraries are needed.</p><ol><li><code>deepspeech</code></li><li><code>numpy</code></li><li><code>webrtcvad</code>: voice activity detection (VAD) library developed by Google for WebRTC (real time communication).<br> To install all the libraries using the command</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>pip <span class="token function">install</span> deepspeech numpy webrtcvad
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>For the asynchronous transcription, three files are needed, which are</p><ol><li>One file to handle interaction with WAV data</li><li>one file to transcribe speech to text on a WAV file,</li><li>one to use these two in the command line<br> And also the pretrained DeepSpeech model and scorer are needed.<br> To download the files using the commands</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">wget</span> https://github.com/mozilla/DeepSpeech/releases/download/v0.9.3/deepspeech-0.9.3-models.pbmm
<span class="token function">wget</span> https://github.com/mozilla/DeepSpeech/releases/download/v0.9.3/deepspeech-0.9.3-models.scorer
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="wav-handler" tabindex="-1"><a class="header-anchor" href="#wav-handler" aria-hidden="true">#</a> WAV Handler</h3><p><code>wav_handler.py</code></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> collections
<span class="token keyword">import</span> contextlib
<span class="token keyword">import</span> wave

<span class="token comment"># Reading Audio Data from a WAV file</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;Reads a .wav file.
Input: path to a .wav file
Output: tuple of pcm data, sample rate, and duration
&quot;&quot;&quot;</span>
<span class="token keyword">def</span> <span class="token function">read_wave</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&#39;&#39;&#39;
    Letâ€™s start with creating a function to read WAV files. This function will take an input,  this input is the path to a WAV file. The file will use the contextlib library to open the  WAV file and read in the contents as bytes. Next, we run multiple asserts on the WAV file -  it must have one channel, have a sample width of 2, have a sample rate of 8, 16, or 32 kHz.

    Once we have asserted that the WAV file is in the right format for processing, we extract the  frames. Next, we extract the pcm data from the frames and the duration from the metadata.  Finally, we return the PCM data, the sample rate, and the duration.
    &#39;&#39;&#39;</span>
    <span class="token keyword">with</span> contextlib<span class="token punctuation">.</span>closing<span class="token punctuation">(</span>wave<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">&#39;rb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> wf<span class="token punctuation">:</span>
        num_channels <span class="token operator">=</span> wf<span class="token punctuation">.</span>getnchannels<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">assert</span> num_channels <span class="token operator">==</span> <span class="token number">1</span>
        sample_width <span class="token operator">=</span> wf<span class="token punctuation">.</span>getsampwidth<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">assert</span> sample_width <span class="token operator">==</span> <span class="token number">2</span>
        sample_rate <span class="token operator">=</span> wf<span class="token punctuation">.</span>getframerate<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">assert</span> sample_rate <span class="token keyword">in</span> <span class="token punctuation">(</span><span class="token number">8000</span><span class="token punctuation">,</span> <span class="token number">16000</span><span class="token punctuation">,</span> <span class="token number">32000</span><span class="token punctuation">)</span>
        frames <span class="token operator">=</span> wf<span class="token punctuation">.</span>getnframes<span class="token punctuation">(</span><span class="token punctuation">)</span>
        pcm_data <span class="token operator">=</span> wf<span class="token punctuation">.</span>readframes<span class="token punctuation">(</span>frames<span class="token punctuation">)</span>
        duration <span class="token operator">=</span> frames <span class="token operator">/</span> sample_rate
        <span class="token keyword">return</span> pcm_data<span class="token punctuation">,</span> sample_rate<span class="token punctuation">,</span> duration

<span class="token comment"># Writing Audio Data to a WAV file</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;Writes a .wav file.
Input: path to new .wav file, PCM audio data, and sample rate.
Output: a .wav file
&quot;&quot;&quot;</span>
<span class="token keyword">def</span> <span class="token function">write_wave</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> audio<span class="token punctuation">,</span> sample_rate<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&#39;&#39;&#39;
    Now letâ€™s create the function to write audio data to a WAV file. This function requires three parameters, the path to a file to write to, the audio data, and the sample rate. This function writes a WAV file in the same way that the read function asserts its parameters. All we do is here is set the channels, sample width, and frame rate and then write the audio frames.
    &#39;&#39;&#39;</span>
    <span class="token keyword">with</span> contextlib<span class="token punctuation">.</span>closing<span class="token punctuation">(</span>wave<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token string">&#39;wb&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> wf<span class="token punctuation">:</span>
        wf<span class="token punctuation">.</span>setnchannels<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        wf<span class="token punctuation">.</span>setsampwidth<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
        wf<span class="token punctuation">.</span>setframerate<span class="token punctuation">(</span>sample_rate<span class="token punctuation">)</span>
        wf<span class="token punctuation">.</span>writeframes<span class="token punctuation">(</span>audio<span class="token punctuation">)</span>

<span class="token triple-quoted-string string">&quot;&quot;&quot;Represents a &quot;frame&quot; of audio data.
Requires the number of byes, the timestamp of the frame, and the duration on init&quot;&quot;&quot;</span>
<span class="token keyword">class</span> <span class="token class-name">Frame</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&#39;&#39;&#39;
    Weâ€™re going to create a class called Frame to hold some information to represent our audio data and make it easier to handle. This object requires three parameters to be created: the bytes, the timestamp in the audio file, and the duration of the Frame.
    &#39;&#39;&#39;</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token builtin">bytes</span><span class="token punctuation">,</span> timestamp<span class="token punctuation">,</span> duration<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span><span class="token builtin">bytes</span> <span class="token operator">=</span> <span class="token builtin">bytes</span>
        self<span class="token punctuation">.</span>timestamp <span class="token operator">=</span> timestamp
        self<span class="token punctuation">.</span>duration <span class="token operator">=</span> duration

<span class="token comment"># Creating Frames of Audio Data for DeepSpeech to Transcribe</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;Generates audio frames from PCM audio data.
Input: the desired frame duration in milliseconds, the PCM data, and
the sample rate.
Yields/Generates: Frames of the requested duration.
&quot;&quot;&quot;</span>
<span class="token keyword">def</span> <span class="token function">frame_generator</span><span class="token punctuation">(</span>frame_duration_ms<span class="token punctuation">,</span> audio<span class="token punctuation">,</span> sample_rate<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&#39;&#39;&#39;
    this function as a frame generator or a frame factory that returns an iterator. This function requires three parameters: the frame duration in milliseconds, the audio data, and the sample rate.
    
    This function starts by deriving an interval of frames from the passed in sample rate and frame duration in milliseconds. We start at an offset and timestamp of 0. We also create a duration constant equal to the number of frames in a second.
    
    While the current offset can be incremented by the interval constant and be within the number of frames of the audio, we generate a Frame for each interval and then increment the timestamp and offset appropriately.
    &#39;&#39;&#39;</span>
    n <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>sample_rate <span class="token operator">*</span> <span class="token punctuation">(</span>frame_duration_ms <span class="token operator">/</span> <span class="token number">1000.0</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
    offset <span class="token operator">=</span> <span class="token number">0</span>
    timestamp <span class="token operator">=</span> <span class="token number">0.0</span>
    duration <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token builtin">float</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span> <span class="token operator">/</span> sample_rate<span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2.0</span>
    <span class="token keyword">while</span> offset <span class="token operator">+</span> n <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>audio<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">yield</span> Frame<span class="token punctuation">(</span>audio<span class="token punctuation">[</span>offset<span class="token punctuation">:</span>offset <span class="token operator">+</span> n<span class="token punctuation">]</span><span class="token punctuation">,</span> timestamp<span class="token punctuation">,</span> duration<span class="token punctuation">)</span>
        timestamp <span class="token operator">+=</span> duration
        offset <span class="token operator">+=</span> n

<span class="token comment"># Collecting Voice Activated Frames for Speech to Text with DeepSpeech</span>
<span class="token triple-quoted-string string">&quot;&quot;&quot;Filters out non-voiced audio frames.
Given a webrtcvad.Vad and a source of audio frames, yields only
the voiced audio.
Arguments:
sample_rate - The audio sample rate, in Hz.
frame_duration_ms - The frame duration in milliseconds.
padding_duration_ms - The amount to pad the window, in milliseconds.
vad - An instance of webrtcvad.Vad.
frames - a source of audio frames (sequence or generator).
Returns: A generator that yields PCM audio data.
&quot;&quot;&quot;</span>
<span class="token keyword">def</span> <span class="token function">vad_collector</span><span class="token punctuation">(</span>sample_rate<span class="token punctuation">,</span> frame_duration_ms<span class="token punctuation">,</span>
                  padding_duration_ms<span class="token punctuation">,</span> vad<span class="token punctuation">,</span> frames<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&#39;&#39;&#39;
    function to collect all the frames that contain voice. This function requires a sample rate, the frame duration in milliseconds, the padding duration in milliseconds, a voice activation detector (VAD) from webrtcvad, and the audio data frames.

    The VAD algorithm uses a padded ring buffer and checks to see what percentage of the frames in the window are voiced. When the window reaches a 90% voiced frame rate, the VAD triggers and begins yielding audio frames. While generating frames, if the percentage of voiced audio data in the frame drops below 10%, it will stop generating frames.
    &#39;&#39;&#39;</span>
    num_padding_frames <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span>padding_duration_ms <span class="token operator">/</span> frame_duration_ms<span class="token punctuation">)</span>
    <span class="token comment"># We use a deque for our sliding window/ring buffer.</span>
    ring_buffer <span class="token operator">=</span> collections<span class="token punctuation">.</span>deque<span class="token punctuation">(</span>maxlen<span class="token operator">=</span>num_padding_frames<span class="token punctuation">)</span>
    <span class="token comment"># We have two states: TRIGGERED and NOTTRIGGERED. We start in the</span>
    <span class="token comment"># NOTTRIGGERED state.</span>
    triggered <span class="token operator">=</span> <span class="token boolean">False</span>
    voiced_frames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> frame <span class="token keyword">in</span> frames<span class="token punctuation">:</span>
        is_speech <span class="token operator">=</span> vad<span class="token punctuation">.</span>is_speech<span class="token punctuation">(</span>frame<span class="token punctuation">.</span><span class="token builtin">bytes</span><span class="token punctuation">,</span> sample_rate<span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> triggered<span class="token punctuation">:</span>
            ring_buffer<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> is_speech<span class="token punctuation">)</span><span class="token punctuation">)</span>
            num_voiced <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token punctuation">[</span>f <span class="token keyword">for</span> f<span class="token punctuation">,</span> speech <span class="token keyword">in</span> ring_buffer <span class="token keyword">if</span> speech<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token comment"># If we&#39;re NOTTRIGGERED and more than 90% of the frames in</span>
            <span class="token comment"># the ring buffer are voiced frames, then enter the</span>
            <span class="token comment"># TRIGGERED state.</span>
            <span class="token keyword">if</span> num_voiced <span class="token operator">&gt;</span> <span class="token number">0.9</span> <span class="token operator">*</span> ring_buffer<span class="token punctuation">.</span>maxlen<span class="token punctuation">:</span>
                triggered <span class="token operator">=</span> <span class="token boolean">True</span>
                <span class="token comment"># We want to yield all the audio we see from now until</span>
                <span class="token comment"># we are NOTTRIGGERED, but we have to start with the</span>
                <span class="token comment"># audio that&#39;s already in the ring buffer.</span>
                <span class="token keyword">for</span> f<span class="token punctuation">,</span> s <span class="token keyword">in</span> ring_buffer<span class="token punctuation">:</span>
                    voiced_frames<span class="token punctuation">.</span>append<span class="token punctuation">(</span>f<span class="token punctuation">)</span>
                ring_buffer<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token comment"># We&#39;re in the TRIGGERED state, so collect the audio data</span>
            <span class="token comment"># and add it to the ring buffer.</span>
            voiced_frames<span class="token punctuation">.</span>append<span class="token punctuation">(</span>frame<span class="token punctuation">)</span>
            ring_buffer<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">(</span>frame<span class="token punctuation">,</span> is_speech<span class="token punctuation">)</span><span class="token punctuation">)</span>
            num_unvoiced <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token punctuation">[</span>f <span class="token keyword">for</span> f<span class="token punctuation">,</span> speech <span class="token keyword">in</span> ring_buffer <span class="token keyword">if</span> <span class="token keyword">not</span> speech<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token comment"># If more than 90% of the frames in the ring buffer are</span>
            <span class="token comment"># unvoiced, then enter NOTTRIGGERED and yield whatever</span>
            <span class="token comment"># audio we&#39;ve collected.</span>
            <span class="token keyword">if</span> num_unvoiced <span class="token operator">&gt;</span> <span class="token number">0.9</span> <span class="token operator">*</span> ring_buffer<span class="token punctuation">.</span>maxlen<span class="token punctuation">:</span>
                triggered <span class="token operator">=</span> <span class="token boolean">False</span>
                <span class="token keyword">yield</span> <span class="token string">b&#39;&#39;</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>f<span class="token punctuation">.</span><span class="token builtin">bytes</span> <span class="token keyword">for</span> f <span class="token keyword">in</span> voiced_frames<span class="token punctuation">]</span><span class="token punctuation">)</span>
                ring_buffer<span class="token punctuation">.</span>clear<span class="token punctuation">(</span><span class="token punctuation">)</span>
                voiced_frames <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">if</span> triggered<span class="token punctuation">:</span>
        <span class="token keyword">pass</span>
    <span class="token comment"># If we have any leftover voiced audio when we run out of input,</span>
    <span class="token comment"># yield it.</span>
    <span class="token keyword">if</span> voiced_frames<span class="token punctuation">:</span>
        <span class="token keyword">yield</span> <span class="token string">b&#39;&#39;</span><span class="token punctuation">.</span>join<span class="token punctuation">(</span><span class="token punctuation">[</span>f<span class="token punctuation">.</span><span class="token builtin">bytes</span> <span class="token keyword">for</span> f <span class="token keyword">in</span> voiced_frames<span class="token punctuation">]</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="transcribe-speech-to-text" tabindex="-1"><a class="header-anchor" href="#transcribe-speech-to-text" aria-hidden="true">#</a> Transcribe Speech to Text</h3><p><code>wav_transcriber.py</code></p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> glob
<span class="token keyword">import</span> webrtcvad
<span class="token keyword">import</span> logging
<span class="token keyword">import</span> wav_handler
<span class="token keyword">from</span> deepspeech <span class="token keyword">import</span> Model
<span class="token keyword">from</span> timeit <span class="token keyword">import</span> default_timer <span class="token keyword">as</span> timer

<span class="token comment"># Pick Which DeepSpeech Model to Use</span>
<span class="token triple-quoted-string string">&#39;&#39;&#39;
Load the pre-trained model into the memory
@param models: Output Graph Protocol Buffer file
@param scorer: Scorer file
@Retval
Returns a DeepSpeech Object
&#39;&#39;&#39;</span>
<span class="token keyword">def</span> <span class="token function">load_model</span><span class="token punctuation">(</span>models<span class="token punctuation">,</span> scorer<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&#39;&#39;&#39;
    to load up the model and scorer for DeepSpeech to run speech to text with. This function takes two parameters, the models graph, which we create a function to produce below, and the path to the scorer file. All it does is load the model from the graph and enable the use of the scorer. This function returns a DeepSpeech object.
    &#39;&#39;&#39;</span>
    ds <span class="token operator">=</span> Model<span class="token punctuation">(</span>models<span class="token punctuation">)</span>
    ds<span class="token punctuation">.</span>enableExternalScorer<span class="token punctuation">(</span>scorer<span class="token punctuation">)</span>
    <span class="token keyword">return</span> ds

<span class="token comment"># Speech to Text on an Audio File with DeepSpeech</span>
<span class="token triple-quoted-string string">&#39;&#39;&#39;
Run Inference on input audio file
@param ds: Deepspeech object
@param audio: Input audio for running inference on
@param fs: Sample rate of the input audio file
@Retval:
Returns a list [Inference, Inference Time, Audio Length]
&#39;&#39;&#39;</span>
<span class="token keyword">def</span> <span class="token function">stt</span><span class="token punctuation">(</span>ds<span class="token punctuation">,</span> audio<span class="token punctuation">,</span> fs<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&#39;&#39;&#39;
    This function is the one that does the actual speech recognition. It takes three inputs, a DeepSpeech model, the audio data, and the sample rate.
    
    We begin by setting the time to 0 and calculating the length of the audio. All we really have to do is call the DeepSpeech modelâ€™s stt function to do our own stt function. We pass the audio file to the stt function and return the output.
    &#39;&#39;&#39;</span>
    inference_time <span class="token operator">=</span> <span class="token number">0.0</span>
    audio_length <span class="token operator">=</span> <span class="token builtin">len</span><span class="token punctuation">(</span>audio<span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">/</span> fs<span class="token punctuation">)</span>
    <span class="token comment"># Run Deepspeech</span>
    output <span class="token operator">=</span> ds<span class="token punctuation">.</span>stt<span class="token punctuation">(</span>audio<span class="token punctuation">)</span>
    <span class="token keyword">return</span> output

<span class="token comment"># DeepSpeech Model Graph Creator Function</span>
<span class="token triple-quoted-string string">&#39;&#39;&#39;
Resolve directory path for the models and fetch each of them.
@param dirName: Path to the directory containing pre-trained models
@Retval:
Retunns a tuple containing each of the model files (pb, scorer)
&#39;&#39;&#39;</span>
<span class="token keyword">def</span> <span class="token function">resolve_models</span><span class="token punctuation">(</span>dirName<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&#39;&#39;&#39;
    This is the function that creates the model graph for the load_model function we created a couple sections above. This function takes the path to a directory. From that directory, it looks for files with the DeepSpeech model extension, pbmm and the DeepSpeech scorer file extension, .scorer. Then, it returns both of those values.
    &#39;&#39;&#39;</span>
    pb <span class="token operator">=</span> glob<span class="token punctuation">.</span>glob<span class="token punctuation">(</span>dirName <span class="token operator">+</span> <span class="token string">&quot;/*.pbmm&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    logging<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">&quot;Found Model: %s&quot;</span> <span class="token operator">%</span> pb<span class="token punctuation">)</span>
    scorer <span class="token operator">=</span> glob<span class="token punctuation">.</span>glob<span class="token punctuation">(</span>dirName <span class="token operator">+</span> <span class="token string">&quot;/*.scorer&quot;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    logging<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">&quot;Found scorer: %s&quot;</span> <span class="token operator">%</span> scorer<span class="token punctuation">)</span>
    <span class="token keyword">return</span> pb<span class="token punctuation">,</span> scorer


<span class="token comment"># Voice Activation Detection to Create Segments for Speech to Text</span>
<span class="token triple-quoted-string string">&#39;&#39;&#39;
Generate VAD segments. Filters out non-voiced audio frames.
@param waveFile: Input wav file to run VAD on.0
@Retval:
Returns tuple of
   segments: a bytearray of multiple smaller audio frames
             (The longer audio split into mutiple smaller one&#39;s)
   sample_rate: Sample rate of the input audio file
   audio_length: Duraton of the input audio file
&#39;&#39;&#39;</span>
<span class="token keyword">def</span> <span class="token function">vad_segment_generator</span><span class="token punctuation">(</span>wavFile<span class="token punctuation">,</span> aggressiveness<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&#39;&#39;&#39;
    The last function in our WAV transcription file generates segments of text that contain voice. We use the WAV handler file we created earlier and webrtcvad to do the heavy lifting. This function requires two parameters: a WAV file and an integer value from 0 to 3 representing how aggressively we want to filter out non-voice activity.
    
    We call the read_wave function from the wav_handler.py file we created earlier and imported above to get the audio data, sample rate, and audio length. We then assert that the sample rate is 16kHz before moving on to create a VAD object. Next, we call the frame generator from wav_handler.
    
    We convert the generated iterator to a list which we pass to the vad_collector function from wav_handler along with the sample rate, frame duration (30 ms), padding duration (300 ms), and VAD object. Finally, we return the collected VAD segments along with the sample rate and audio length.
    &#39;&#39;&#39;</span>
    audio<span class="token punctuation">,</span> sample_rate<span class="token punctuation">,</span> audio_length <span class="token operator">=</span> wav_handler<span class="token punctuation">.</span>read_wave<span class="token punctuation">(</span>wavFile<span class="token punctuation">)</span>
    <span class="token keyword">assert</span> sample_rate <span class="token operator">==</span> <span class="token number">16000</span><span class="token punctuation">,</span> <span class="token string">&quot;Only 16000Hz input WAV files are supported for now!&quot;</span>
    vad <span class="token operator">=</span> webrtcvad<span class="token punctuation">.</span>Vad<span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">(</span>aggressiveness<span class="token punctuation">)</span><span class="token punctuation">)</span>
    frames <span class="token operator">=</span> wav_handler<span class="token punctuation">.</span>frame_generator<span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">,</span> audio<span class="token punctuation">,</span> sample_rate<span class="token punctuation">)</span>
    frames <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">(</span>frames<span class="token punctuation">)</span>
    segments <span class="token operator">=</span> wav_handler<span class="token punctuation">.</span>vad_collector<span class="token punctuation">(</span>sample_rate<span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> vad<span class="token punctuation">,</span> frames<span class="token punctuation">)</span>
    <span class="token keyword">return</span> segments<span class="token punctuation">,</span> sample_rate<span class="token punctuation">,</span> audio_length
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="reading-arguments-for-deepspeech-speech-to-text" tabindex="-1"><a class="header-anchor" href="#reading-arguments-for-deepspeech-speech-to-text" aria-hidden="true">#</a> Reading Arguments for DeepSpeech Speech to Text</h3><p>We create a main function that takes one parameter â€” <code>args</code>. These are the arguments passed in through the command line. We use the <code>argparse</code> library to parse the arguments sent in. We also create helpful tips on how to use each one.</p><p>We use <code>aggressive</code> to determine how aggressively we want to filter. audio directs us to the audio file path. model points us to the directory containing the model and scorer. Finally, stream dictates whether or not we are streaming audio. Neither stream nor audio is required, but one or the other must be present.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token keyword">import</span> sys
<span class="token keyword">import</span> os
<span class="token keyword">import</span> logging
<span class="token keyword">import</span> argparse
<span class="token keyword">import</span> subprocess
<span class="token keyword">import</span> shlex
<span class="token keyword">import</span> numpy <span class="token keyword">as</span> np
<span class="token keyword">import</span> wav_transcriber
<span class="token comment"># Debug helpers</span>
logging<span class="token punctuation">.</span>basicConfig<span class="token punctuation">(</span>stream<span class="token operator">=</span>sys<span class="token punctuation">.</span>stderr<span class="token punctuation">,</span> level<span class="token operator">=</span>logging<span class="token punctuation">.</span>DEBUG<span class="token punctuation">)</span>
<span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span><span class="token punctuation">:</span>
    parser <span class="token operator">=</span> argparse<span class="token punctuation">.</span>ArgumentParser<span class="token punctuation">(</span>description<span class="token operator">=</span><span class="token string">&#39;Transcribe long audio files using webRTC VAD or use the streaming interface&#39;</span><span class="token punctuation">)</span>
    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&#39;--aggressive&#39;</span><span class="token punctuation">,</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token builtin">int</span><span class="token punctuation">,</span> choices<span class="token operator">=</span><span class="token builtin">range</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">)</span><span class="token punctuation">,</span> required<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>
                       <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">&#39;Determines how aggressive filtering out non-speech is. (Interger between 0-3)&#39;</span><span class="token punctuation">)</span>
    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&#39;--audio&#39;</span><span class="token punctuation">,</span> required<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>
                       <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">&#39;Path to the audio file to run (WAV format)&#39;</span><span class="token punctuation">)</span>
    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&#39;--model&#39;</span><span class="token punctuation">,</span> required<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
                       <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">&#39;Path to directory that contains all model files (output_graph and scorer)&#39;</span><span class="token punctuation">)</span>
    parser<span class="token punctuation">.</span>add_argument<span class="token punctuation">(</span><span class="token string">&#39;--stream&#39;</span><span class="token punctuation">,</span> required<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span> action<span class="token operator">=</span><span class="token string">&#39;store_true&#39;</span><span class="token punctuation">,</span>
                       <span class="token builtin">help</span><span class="token operator">=</span><span class="token string">&#39;To use deepspeech streaming interface&#39;</span><span class="token punctuation">)</span>
    args <span class="token operator">=</span> parser<span class="token punctuation">.</span>parse_args<span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> args<span class="token punctuation">.</span>stream <span class="token keyword">is</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;Opening mic for streaming&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">elif</span> args<span class="token punctuation">.</span>audio <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        logging<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">&quot;Transcribing audio file @ %s&quot;</span> <span class="token operator">%</span> args<span class="token punctuation">.</span>audio<span class="token punctuation">)</span>
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        parser<span class="token punctuation">.</span>print_help<span class="token punctuation">(</span><span class="token punctuation">)</span>
        parser<span class="token punctuation">.</span>exit<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="using-deepspeech-for-real-time-or-asynchronous-speech-recognition" tabindex="-1"><a class="header-anchor" href="#using-deepspeech-for-real-time-or-asynchronous-speech-recognition" aria-hidden="true">#</a> Using DeepSpeech for Real Time or Asynchronous Speech Recognition</h3><p>This is still inside the main function we started above. Once we parse all the arguments, we load up DeepSpeech. First, we get the directory containing the models. Next, we call the <code>wav_transcriber</code> to resolve and load the models.</p><p>If we pass the path to an audio data file in the command line, then we will run asynchronous speech recognition. The first thing we do for that is call the VAD segment generator to generate the VAD segments and get the sample rate and audio length. Next, we open up a text file to transcribe to.</p><p>For each of the enumerated segments, we will process each chunk by using <code>numpy</code> to pull the segment from the buffer and the speech to text function from <code>wav_transcriber</code> to do the speech to text functionality. We write to the text file until we run out of audio segments.</p><p>If we pass stream instead of audio, then we open up the mic to stream audio data in. If you donâ€™t need real time automatic speech recognition, then you can ignore this part. First, we have to spin up a subprocess to open up a mic to stream in real time just like we did with PyTorch local speech recognition.</p><p>We use the <code>subprocess</code> and <code>shlex</code> libraries to open the mic to stream voice audio until we shut it down. The model will read 512 bytes of audio data at a time and transcribe it.</p><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code><span class="token comment"># Point to a path containing the pre-trained models &amp; resolve ~ if used</span>
dirName <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>expanduser<span class="token punctuation">(</span>args<span class="token punctuation">.</span>model<span class="token punctuation">)</span>
<span class="token comment"># Resolve all the paths of model files</span>
output_graph<span class="token punctuation">,</span> scorer <span class="token operator">=</span> wav_transcriber<span class="token punctuation">.</span>resolve_models<span class="token punctuation">(</span>dirName<span class="token punctuation">)</span>
<span class="token comment"># Load output_graph, alpahbet and scorer</span>
model_retval <span class="token operator">=</span> wav_transcriber<span class="token punctuation">.</span>load_model<span class="token punctuation">(</span>output_graph<span class="token punctuation">,</span> scorer<span class="token punctuation">)</span>
<span class="token keyword">if</span> args<span class="token punctuation">.</span>audio <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
    <span class="token comment"># Run VAD on the input file</span>
    waveFile <span class="token operator">=</span> args<span class="token punctuation">.</span>audio
    segments<span class="token punctuation">,</span> sample_rate<span class="token punctuation">,</span> audio_length <span class="token operator">=</span> wav_transcriber<span class="token punctuation">.</span>vad_segment_generator<span class="token punctuation">(</span>waveFile<span class="token punctuation">,</span> args<span class="token punctuation">.</span>aggressive<span class="token punctuation">)</span>
    f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span>waveFile<span class="token punctuation">.</span>rstrip<span class="token punctuation">(</span><span class="token string">&quot;.wav&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;.txt&quot;</span><span class="token punctuation">,</span> <span class="token string">&#39;w&#39;</span><span class="token punctuation">)</span>
    logging<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">&quot;Saving Transcript @: %s&quot;</span> <span class="token operator">%</span> waveFile<span class="token punctuation">.</span>rstrip<span class="token punctuation">(</span><span class="token string">&quot;.wav&quot;</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;.txt&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">for</span> i<span class="token punctuation">,</span> segment <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>segments<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># Run deepspeech on the chunk that just completed VAD</span>
        logging<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">&quot;Processing chunk %002d&quot;</span> <span class="token operator">%</span> <span class="token punctuation">(</span>i<span class="token punctuation">,</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        audio <span class="token operator">=</span> np<span class="token punctuation">.</span>frombuffer<span class="token punctuation">(</span>segment<span class="token punctuation">,</span> dtype<span class="token operator">=</span>np<span class="token punctuation">.</span>int16<span class="token punctuation">)</span>
        output <span class="token operator">=</span> wav_transcriber<span class="token punctuation">.</span>stt<span class="token punctuation">(</span>model_retval<span class="token punctuation">,</span> audio<span class="token punctuation">,</span> sample_rate<span class="token punctuation">)</span>
        logging<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">&quot;Transcript: %s&quot;</span> <span class="token operator">%</span> output<span class="token punctuation">)</span>
        f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>output <span class="token operator">+</span> <span class="token string">&quot; &quot;</span><span class="token punctuation">)</span>
    <span class="token comment"># Summary of the files processed</span>
    f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">else</span><span class="token punctuation">:</span>
    sctx <span class="token operator">=</span> model_retval<span class="token punctuation">.</span>createStream<span class="token punctuation">(</span><span class="token punctuation">)</span>
    subproc <span class="token operator">=</span> subprocess<span class="token punctuation">.</span>Popen<span class="token punctuation">(</span>shlex<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">&#39;rec -q -V0 -e signed -L -c 1 -b 16 -r 16k -t raw - gain -2&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                stdout<span class="token operator">=</span>subprocess<span class="token punctuation">.</span>PIPE<span class="token punctuation">,</span>
                                bufsize<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;You can start speaking now. Press Control-C to stop recording.&#39;</span><span class="token punctuation">)</span>
    <span class="token keyword">try</span><span class="token punctuation">:</span>
        <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
            data <span class="token operator">=</span> subproc<span class="token punctuation">.</span>stdout<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token number">512</span><span class="token punctuation">)</span>
            sctx<span class="token punctuation">.</span>feedAudioContent<span class="token punctuation">(</span>np<span class="token punctuation">.</span>frombuffer<span class="token punctuation">(</span>data<span class="token punctuation">,</span> np<span class="token punctuation">.</span>int16<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token keyword">except</span> KeyboardInterrupt<span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&#39;Transcription: &#39;</span><span class="token punctuation">,</span> sctx<span class="token punctuation">.</span>finishStream<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        subproc<span class="token punctuation">.</span>terminate<span class="token punctuation">(</span><span class="token punctuation">)</span>
        subproc<span class="token punctuation">.</span>wait<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&#39;__main__&#39;</span><span class="token punctuation">:</span>
    main<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="resource" tabindex="-1"><a class="header-anchor" href="#resource" aria-hidden="true">#</a> Resource</h2><p><a href="https://medium.com/plain-simple-software/a-guide-to-deepspeech-speech-to-text-b4b051477cfa" target="_blank" rel="noopener noreferrer">A Guide to DeepSpeech Speech to Text<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></div><!----><footer class="page-meta"><!----><div class="meta-item git-info"><div class="update-time"><span class="label">Last update: </span><!----></div><div class="contributors"><span class="label">Contributors: </span><!--[--><!--[--><span class="contributor" title="email: nutterair1989@gmail.com">Haiyue</span><!--]--><!--]--></div></div></footer><nav class="vp-page-nav"><a class="vp-link nav-link prev" href="/techniques/AI/ai_models.html"><div class="hint"><span class="arrow start"></span>Prev</div><div class="link"><span class="font-icon icon fa-fw fa-sm fas fa-circle-dot" style=""></span>AI Models List</div></a><a class="vp-link nav-link next" href="/techniques/AI/cuda.html"><div class="hint">Next<span class="arrow end"></span></div><div class="link">CUDA Torch<span class="font-icon icon fa-fw fa-sm fas fa-circle-dot" style=""></span></div></a></nav><!----><!----><!--]--></main><!--]--><footer class="vp-footer-wrapper"><div class="vp-footer">Email me if needed</div><div class="vp-copyright">Copyright Â© 2024 Haiyue</div></footer></div><!--]--><!----><!--]--></div>
    <script type="module" src="/assets/app-ee1f1ffa.js" defer></script>
  </body>
</html>
